(window.webpackJsonp=window.webpackJsonp||[]).push([[6],{237:function(e,t,a){"use strict";var n=a(7),l=a(8),s=a(12),r=a(11),i=a(13),c=a(0),o=a.n(c),u=a(238),m=a.n(u),p=function(e){function t(){var e,a;Object(n.a)(this,t);for(var l=arguments.length,i=new Array(l),c=0;c<l;c++)i[c]=arguments[c];return(a=Object(s.a)(this,(e=Object(r.a)(t)).call.apply(e,[this].concat(i)))).matchingType=function(e){switch(e){case"line-scale":return o.a.createElement("div",{className:m.a["line-scale"]},o.a.createElement("div",null),o.a.createElement("div",null),o.a.createElement("div",null),o.a.createElement("div",null),o.a.createElement("div",null));case"ball-clip-rotate-multiple":return o.a.createElement("div",{className:m.a["ball-clip-rotate-multiple"]},o.a.createElement("div",null),o.a.createElement("div",null));case"ball-clip-rotate-pulse":return o.a.createElement("div",{className:m.a["ball-clip-rotate-pulse"]},o.a.createElement("div",null),o.a.createElement("div",null));case"square-spin":return o.a.createElement("div",{className:m.a["square-spin"]},o.a.createElement("div",null));case"ball-scale":return o.a.createElement("div",{className:m.a["ball-scale"]},o.a.createElement("div",null));case"ball-scale-multiple":return o.a.createElement("div",{className:m.a["ball-scale-multiple"]},o.a.createElement("div",null),o.a.createElement("div",null),o.a.createElement("div",null));default:return o.a.createElement("div",{className:m.a["line-scale"]},o.a.createElement("div",null),o.a.createElement("div",null),o.a.createElement("div",null),o.a.createElement("div",null),o.a.createElement("div",null))}},a}return Object(i.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){var e=this.props,t=e.type;return e.loading?o.a.createElement("div",{className:m.a["loading-box"],style:this.props.style},this.matchingType(t)):null}}]),t}(o.a.Component);p.defaultProps={style:{}},t.a=p},238:function(e,t,a){e.exports={"loading-box":"index_loading-box__1Kgdg","line-scale":"index_line-scale__1_OJc","ball-clip-rotate-multiple":"index_ball-clip-rotate-multiple__3iegK",rotate:"index_rotate__mxK17","ball-clip-rotate-pulse":"index_ball-clip-rotate-pulse__2h6Nk",scale:"index_scale__3JsNk","square-spin":"index_square-spin__37Em9","ball-scale":"index_ball-scale__16fEH","ball-scale-multiple":"index_ball-scale-multiple__1jdW_"}},255:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){return Object.keys(e).reduce(function(t,a){return"aria-"!==a.substr(0,5)&&"data-"!==a.substr(0,5)&&"role"!==a||(t[a]=e[a]),t},{})},e.exports=t.default},256:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n,l=a(9),s=(n=l)&&n.__esModule?n:{default:n};t.getComponentLocale=function(e,t,a,n){var l={};if(t&&t.antLocale&&t.antLocale[a])l=t.antLocale[a];else{var r=n();l=r.default||r}var i=(0,s.default)({},l);e.locale&&(i=(0,s.default)({},i,e.locale),e.locale.lang&&(i.lang=(0,s.default)({},l.lang,e.locale.lang)));return i},t.getLocaleCode=function(e){var t=e.antLocale&&e.antLocale.locale;if(e.antLocale&&e.antLocale.exist&&!t)return"zh-cn";return t}},293:function(e,t,a){"use strict";a(59),a(294)},294:function(e,t,a){},296:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=v(a(9)),l=v(a(20)),s=v(a(14)),r=v(a(15)),i=v(a(10)),c=v(a(16)),o=v(a(24)),u=v(a(0)),m=v(a(1)),p=v(a(113)),d=v(a(255)),f=a(256),h=a(297);function v(e){return e&&e.__esModule?e:{default:e}}var g=function(e){function t(e){(0,s.default)(this,t);var a=(0,i.default)(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));a.onSubmit=function(e){e.preventDefault(),a.props.onSubmit&&a.props.onSubmit(a.state.value||""),a.inputRef&&a.inputRef.blur()},a.onChange=function(e){a.state.focus||a.setState({focus:!0});var t=e.target.value;"value"in a.props||a.setState({value:t}),a.props.onChange&&a.props.onChange(t)},a.onFocus=function(){a.setState({focus:!0}),a.firstFocus=!0,a.props.onFocus&&a.props.onFocus()},a.onBlur=function(){var e;a.onBlurTimeout=(e=function(){a.blurFromOnClear||document.activeElement!==a.inputRef&&a.setState({focus:!1}),a.blurFromOnClear=!1},window.requestAnimationFrame?window.requestAnimationFrame(e):window.setTimeout(e,1)),a.props.onBlur&&a.props.onBlur()},a.onClear=function(){a.doClear()},a.doClear=function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];a.blurFromOnClear=e,"value"in a.props||a.setState({value:""}),a.props.onClear&&a.props.onClear(""),a.props.onChange&&a.props.onChange(""),e&&a.focus()},a.onCancel=function(){a.props.onCancel?a.props.onCancel(a.state.value||""):a.doClear(!1)},a.focus=function(){a.inputRef&&a.inputRef.focus()};var n=void 0;return n="value"in e?e.value||"":"defaultValue"in e?e.defaultValue:"",a.state={value:n,focus:!1},a}return(0,c.default)(t,e),(0,r.default)(t,[{key:"componentDidMount",value:function(){if(this.rightBtnRef){var e=window.getComputedStyle(this.rightBtnRef);this.rightBtnInitMarginleft=e.marginLeft}this.componentDidUpdate()}},{key:"componentDidUpdate",value:function(){if(this.syntheticPhRef)if(this.inputContainerRef&&this.inputContainerRef.className.indexOf(this.props.prefixCls+"-start")>-1){if(this.syntheticPhContainerRef){var e=this.syntheticPhContainerRef.getBoundingClientRect().width;this.syntheticPhRef.style.width=Math.ceil(e)+"px"}!this.props.showCancelButton&&this.rightBtnRef&&(this.rightBtnRef.style.marginRight="0")}else this.syntheticPhRef.style.width="100%",!this.props.showCancelButton&&this.rightBtnRef&&(this.rightBtnRef.style.marginRight="-"+(this.rightBtnRef.offsetWidth+(null!=this.rightBtnInitMarginleft?parseInt(this.rightBtnInitMarginleft,10):0))+"px")}},{key:"componentWillReceiveProps",value:function(e){"value"in e&&e.value!==this.state.value&&this.setState({value:e.value})}},{key:"componentWillUnmount",value:function(){var e;this.onBlurTimeout&&(e=this.onBlurTimeout,window.cancelAnimationFrame?window.cancelAnimationFrame(e):window.clearTimeout(e),this.onBlurTimeout=null)}},{key:"render",value:function(){var e,t=this,s=this.props,r=s.prefixCls,i=s.showCancelButton,c=s.disabled,m=s.placeholder,h=s.className,v=s.style,g=s.maxLength,b=(0,f.getComponentLocale)(this.props,this.context,"SearchBar",function(){return a(298)}).cancelText,y=this.state,E=y.value,_=y.focus,k=(0,o.default)(r,h,(0,l.default)({},r+"-start",!!(_||E&&E.length>0))),C=(0,o.default)(r+"-clear",(0,l.default)({},r+"-clear-show",!!(_&&E&&E.length>0))),S=(0,o.default)(r+"-cancel",(e={},(0,l.default)(e,r+"-cancel-show",!!(i||_||E&&E.length>0)),(0,l.default)(e,r+"-cancel-anim",this.firstFocus),e));return u.default.createElement("form",{onSubmit:this.onSubmit,className:k,style:v,ref:function(e){return t.inputContainerRef=e},action:"#"},u.default.createElement("div",{className:r+"-input"},u.default.createElement("div",{className:r+"-synthetic-ph",ref:function(e){return t.syntheticPhRef=e}},u.default.createElement("span",{className:r+"-synthetic-ph-container",ref:function(e){return t.syntheticPhContainerRef=e}},u.default.createElement("i",{className:r+"-synthetic-ph-icon"}),u.default.createElement("span",{className:r+"-synthetic-ph-placeholder",style:{visibility:m&&!E?"visible":"hidden"}},m))),u.default.createElement("input",(0,n.default)({type:"search",className:r+"-value",value:E,disabled:c,placeholder:m,onChange:this.onChange,onFocus:this.onFocus,onBlur:this.onBlur,ref:function(e){return t.inputRef=e},maxLength:g},(0,d.default)(this.props))),u.default.createElement(p.default,{activeClassName:r+"-clear-active"},u.default.createElement("a",{onClick:this.onClear,className:C}))),u.default.createElement("div",{className:S,onClick:this.onCancel,ref:function(e){return t.rightBtnRef=e}},this.props.cancelText||b))}}]),t}(u.default.Component);t.default=g,g.defaultProps=h.defaultProps,g.contextTypes={antLocale:m.default.object},e.exports=t.default},297:function(e,t,a){"use strict";function n(){}Object.defineProperty(t,"__esModule",{value:!0});t.defaultProps={prefixCls:"am-search",placeholder:"",onSubmit:n,onChange:n,onFocus:n,onBlur:n,onClear:n,showCancelButton:!1,disabled:!1}},298:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={cancelText:"\u53d6\u6d88"},e.exports=t.default},299:function(e,t,a){e.exports={container:"index_container__1QuW0","hot-list-box":"index_hot-list-box__1a_ga","suggest-box":"index_suggest-box__2tE1N"}},301:function(e,t,a){e.exports={"tab-item":"resultTabs_tab-item__2ut1U","list-item":"resultTabs_list-item__1obYw","no-result":"resultTabs_no-result__9-w3W",songs:"resultTabs_songs__2rjHD",left:"resultTabs_left__3pJW_",title:"resultTabs_title__1Z2cT",info:"resultTabs_info__2-MJT",albums:"resultTabs_albums___M-y-",artists:"resultTabs_artists__PJabc",playlists:"resultTabs_playlists__2po5s","sub-info":"resultTabs_sub-info__3L95b"}},303:function(e,t,a){e.exports=a.p+"static/media/music.18d2062e.jpg"},394:function(e,t,a){"use strict";a.r(t);a(293);var n,l,s=a(296),r=a.n(s),i=a(22),c=a.n(i),o=a(27),u=a(7),m=a(8),p=a(12),d=a(11),f=a(13),h=a(0),v=a.n(h),g=a(78),b=a(299),y=a.n(b),E=(a(249),a(250)),_=a.n(E),k=a(102),C=a(237),S=a(301),w=a.n(S),x=a(35),N=a(244),O=a.n(N),j=a(46),T=a(390),R=a(17),B=(n=Object(R.b)("appStore"),Object(T.a)(l=n(l=Object(R.c)(l=function(e){function t(){var e,n;Object(u.a)(this,t);for(var l=arguments.length,s=new Array(l),r=0;r<l;r++)s[r]=arguments[r];return(n=Object(p.a)(this,(e=Object(d.a)(t)).call.apply(e,[this].concat(s)))).state={page:0,searchLoading:!1,songs:[],albums:[],artists:[],playlists:[]},n.getResult=function(){var e=Object(o.a)(c.a.mark(function e(t){var a,l,s,r=arguments;return c.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a=r.length>1&&void 0!==r[1]?r[1]:1,n.setState({searchLoading:!0,songs:[],albums:[],artists:[],playlists:[]}),e.next=4,Object(g.a)("/search?keywords=".concat(t,"&type=").concat(a));case 4:l=e.sent,s=l.result||{},e.t0=a,e.next=1===e.t0?9:10===e.t0?11:100===e.t0?13:1e3===e.t0?15:17;break;case 9:return n.setState({songs:s.songs||[]}),e.abrupt("break",19);case 11:return n.setState({albums:s.albums||[]}),e.abrupt("break",19);case 13:return n.setState({artists:s.artists||[]}),e.abrupt("break",19);case 15:return n.setState({playlists:s.playlists||[]}),e.abrupt("break",19);case 17:return n.setState({songs:s.songs||[]}),e.abrupt("break",19);case 19:n.setState({searchLoading:!1});case 20:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}(),n.handleTabClick=function(e,t){n.setState({page:t});var a=n.props.keywords;n.getResult(a,e.type)},n.goTo=function(e,t){n.props.history.push("/".concat(e,"/").concat(t))},n.addSong=function(e){var t=Object(k.a)({},e,{ar:e.artists,al:{picUrl:a(303)}});n.props.appStore.addSong(t)},n}return Object(f.a)(t,e),Object(m.a)(t,[{key:"componentDidMount",value:function(){this.getResult(this.props.keywords)}},{key:"componentWillUnmount",value:function(){this.setState=function(){}}},{key:"render",value:function(){var e=this,t=this.state,a=t.page,n=t.searchLoading,l=t.songs,s=t.albums,r=t.artists,i=t.playlists,c=this.props.appStore.playlist.length?60:0,o={height:"calc(100vh - ".concat(180+c,"px")},u=function(){return v.a.createElement("div",{className:w.a["no-result"]},v.a.createElement("div",{className:"iconfont icon-wukong",style:{fontSize:28,marginBottom:10}}),v.a.createElement("p",null,"\u6682\u65e0\u641c\u7d22\u7ed3\u679c..."))};return v.a.createElement("div",null,v.a.createElement(_.a,{tabs:[{title:"\u5355\u66f2",type:1},{title:"\u4e13\u8f91",type:10},{title:"\u6b4c\u624b",type:100},{title:"\u6b4c\u5355",type:1e3}],onTabClick:this.handleTabClick,page:a,swipeable:!1,animated:!1},v.a.createElement("div",{className:"".concat(w.a["tab-item"]," ").concat(w.a.songs),style:o},v.a.createElement(j.a,null,v.a.createElement("ul",null,l&&l.map(function(t){return v.a.createElement("li",{key:t.id,onClick:function(){return e.addSong(t)}},v.a.createElement("div",{className:w.a.left},v.a.createElement("p",{className:w.a.title},t.name),v.a.createElement("p",{className:w.a.info},t.artists&&t.artists.reduce(function(e,a,n){return n<t.artists.length-1?e+=a.name+" / ":e+=a.name+" - ",e},""),t.album&&t.album.name)),v.a.createElement("div",{className:"iconfont icon-erji1"}))})),v.a.createElement(C.a,{loading:n,style:{position:"absolute",top:"40%"}}),!n&&!l.length&&v.a.createElement(u,null))),v.a.createElement("div",{className:"".concat(w.a["tab-item"]," ").concat(w.a.albums),style:o},v.a.createElement(j.a,null,v.a.createElement("ul",null,s&&s.map(function(t){return v.a.createElement("li",{key:t.id,onClick:function(){return e.goTo("album",t.id)}},v.a.createElement("div",null,v.a.createElement("img",{src:t.picUrl,alt:""})),v.a.createElement("div",{className:w.a.info},v.a.createElement("div",null,t.name),v.a.createElement("div",{className:w.a["sub-info"]},t.artists&&t.artists.reduce(function(e,a,n){return n<t.artists.length-1?e+=a.name+"/":e+=a.name+"  ",e},""),t.size,"\u9996\xa0",O()(t.publishTime).format("YYYY-MM-DD"))))})),v.a.createElement(C.a,{loading:n,style:{position:"absolute",top:"40%"}}),!n&&!s.length&&v.a.createElement(u,null))),v.a.createElement("div",{className:"".concat(w.a["tab-item"]," ").concat(w.a.artists),style:o},v.a.createElement(j.a,null,v.a.createElement("ul",null,r&&r.map(function(t){return v.a.createElement("li",{key:t.id,onClick:function(){return e.goTo("singer",t.id)}},v.a.createElement("div",null,v.a.createElement("img",{src:t.img1v1Url,alt:"",style:{borderRadius:"50%"}})),v.a.createElement("div",{className:w.a.info},v.a.createElement("div",null,t.name),v.a.createElement("div",{className:w.a["sub-info"]},v.a.createElement("span",{style:{display:t.albumSize?"":"none"}},"\u4e13\u8f91:",t.albumSize),"\u2003",v.a.createElement("span",{style:{display:t.mvSize?"":"none"}},"MV:",t.mvSize))))})),v.a.createElement(C.a,{loading:n,style:{position:"absolute",top:"40%"}}),!n&&!r.length&&v.a.createElement(u,null))),v.a.createElement("div",{className:"".concat(w.a["tab-item"]," ").concat(w.a.playlists),style:o},v.a.createElement(j.a,null,v.a.createElement("ul",null,i&&i.map(function(t){return v.a.createElement("li",{key:t.id,onClick:function(){return e.goTo("sheet",t.id)}},v.a.createElement("div",null,v.a.createElement("img",{src:t.coverImgUrl,alt:""})),v.a.createElement("div",{className:w.a.info},v.a.createElement("div",null,t.name),v.a.createElement("div",{className:w.a["sub-info"]},t.trackCount,"\u9996 - ",t.creator.nickname,"  \u64ad\u653e",Object(x.b)(t.playCount),"\u6b21")))})),v.a.createElement(C.a,{loading:n,style:{position:"absolute",top:"40%"}}),!n&&!i.length&&v.a.createElement(u,null)))))}}]),t}(v.a.Component))||l)||l)||l),L=function(e){function t(){var e,a;Object(u.a)(this,t);for(var n=arguments.length,l=new Array(n),s=0;s<n;s++)l[s]=arguments[s];return(a=Object(p.a)(this,(e=Object(d.a)(t)).call.apply(e,[this].concat(l)))).state={hotlist:[],isFocus:!1,keywords:"",suggestList:[],searchHistory:JSON.parse(localStorage.getItem("searchHistory"))||[],isSearch:!1},a.getHotlist=Object(o.a)(c.a.mark(function e(){var t;return c.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(g.a)("/search/hot");case 2:t=e.sent,a.setState({hotlist:t.result?t.result.hots:[]});case 4:case"end":return e.stop()}},e,this)})),a.getSuggestList=function(){var e=Object(o.a)(c.a.mark(function e(t){var n;return c.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t){e.next=3;break}return a.setState({suggestList:[]}),e.abrupt("return");case 3:return e.next=5,Object(g.a)("/search/suggest",{keywords:t,type:"mobile"});case 5:n=e.sent,a.setState({suggestList:n.result?n.result.allMatch:[]});case 7:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}(),a.handleChange=function(){var e=Object(o.a)(c.a.mark(function e(t){return c.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:a.getSuggestList(t),a.setState({keywords:t,isSearch:!1});case 2:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}(),a.search=function(){var e=Object(o.a)(c.a.mark(function e(t){return c.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:a.setState({keywords:t,isSearch:!0}),a.addHistory(t);case 2:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}(),a.addHistory=function(e){var t=JSON.parse(localStorage.getItem("searchHistory"))||[],n=t.findIndex(function(t){return t===e});-1!==n&&t.splice(n,1),t.unshift(e),localStorage.setItem("searchHistory",JSON.stringify(t)),a.setState({searchHistory:t})},a.removeHistory=function(e){var t=JSON.parse(localStorage.getItem("searchHistory"))||[];t.splice(e,1),localStorage.setItem("searchHistory",JSON.stringify(t)),a.setState({searchHistory:t})},a}return Object(f.a)(t,e),Object(m.a)(t,[{key:"componentDidMount",value:function(){this.getHotlist()}},{key:"componentWillUnmount",value:function(){this.setState=function(){}}},{key:"render",value:function(){var e=this,t=this.state,a=t.hotlist,n=t.isFocus,l=t.keywords,s=t.suggestList,i=t.searchHistory,c=t.isSearch;return v.a.createElement("div",{className:y.a.container},v.a.createElement("div",null,v.a.createElement(r.a,{value:l,onSubmit:this.search,onChange:this.handleChange,placeholder:"\u641c\u7d22\u6b4c\u624b\u3001\u6b4c\u66f2\u3001\u4e13\u8f91",onBlur:function(){return e.setState({isFocus:!1})},onFocus:function(){return e.setState({isFocus:!0})}})),v.a.createElement("div",null,l||n?v.a.createElement(function(){return v.a.createElement("div",null,c?v.a.createElement("div",null,v.a.createElement(B,{keywords:l})):v.a.createElement("div",null,v.a.createElement("ul",{className:y.a["suggest-box"]},s&&s.map(function(t){return v.a.createElement("li",{key:t.keyword,onClick:function(){return e.search(t.keyword)}},v.a.createElement("div",{className:"iconfont icon-sousuo1"}),v.a.createElement("div",null,t.keyword))}))))},null):v.a.createElement(function(){return v.a.createElement("div",null,v.a.createElement("div",{className:y.a["hot-list-box"]},v.a.createElement("div",{style:{display:a.length?"":"none"}},"\u70ed\u95e8\u641c\u7d22"),v.a.createElement("ul",null,a&&a.map(function(t){return v.a.createElement("li",{key:t.first,onClick:function(){return e.search(t.first)}},t.first)})),v.a.createElement("ol",{style:{display:a.length?"":"none"}},i&&i.map(function(t,a){return v.a.createElement("li",{key:t},v.a.createElement("div",{className:"iconfont icon-lishibisai"}),v.a.createElement("div",{onClick:function(){return e.search(t)}},t),v.a.createElement("div",{className:"iconfont icon-lvzhou_shanchu_lajitong",onClick:function(){return e.removeHistory(a)}}))})),v.a.createElement(C.a,{loading:!a.length})))},null)))}}]),t}(v.a.Component);t.default=L}}]);
//# sourceMappingURL=6.990c72f9.chunk.js.map