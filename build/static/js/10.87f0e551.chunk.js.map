{"version":3,"sources":["components/Loading/index.js","components/Loading/style/index.module.less","pages/ArtistsPage/style/index.module.less","pages/ArtistsPage/index.js"],"names":["Loading","matchingType","type","react__WEBPACK_IMPORTED_MODULE_5___default","a","createElement","className","style","_this$props","this","props","loading","React","Component","defaultProps","module","exports","loading-box","line-scale","ball-clip-rotate-multiple","rotate","ball-clip-rotate-pulse","scale","square-spin","ball-scale","ball-scale-multiple","container","navbar","iconfont","singer-item","avatar","name","ArtistsPage","inject","withRouter","observer","state","artists","isLoadMore","haveMore","getArtists","_callee","res","_Users_one_Desktop_Demo_music_node_modules_babel_preset_react_app_node_modules_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default","wrap","_context","prev","next","_this","setState","get","limit","sent","more","stop","goBack","history","onLoadMore","_callee2","_context2","abrupt","offset","length","setTimeout","concat","scroll","finishPullUp","_this2","_this$state","h","appStore","playlist","height","react__WEBPACK_IMPORTED_MODULE_7___default","onClick","title","_components_Scroll_index__WEBPACK_IMPORTED_MODULE_12__","onPullingUp","ref","el","map","item","key","id","react_router_dom__WEBPACK_IMPORTED_MODULE_11__","to","src","img1v1Url","alt","display","albumSize","musicSize","_components_Loading__WEBPACK_IMPORTED_MODULE_13__"],"mappings":"uKAIMA,6MASFC,aAAe,SAACC,GACZ,OAAQA,GACJ,IAAK,aACD,OACIC,EAAAC,EAAAC,cAAA,OAAKC,UAAWC,IAAM,eAClBJ,EAAAC,EAAAC,cAAA,YACAF,EAAAC,EAAAC,cAAA,YACAF,EAAAC,EAAAC,cAAA,YACAF,EAAAC,EAAAC,cAAA,YACAF,EAAAC,EAAAC,cAAA,aAIZ,IAAK,4BACD,OACIF,EAAAC,EAAAC,cAAA,OAAKC,UAAWC,IAAM,8BAClBJ,EAAAC,EAAAC,cAAA,YACAF,EAAAC,EAAAC,cAAA,aAIZ,IAAK,yBACD,OACIF,EAAAC,EAAAC,cAAA,OAAKC,UAAWC,IAAM,2BAClBJ,EAAAC,EAAAC,cAAA,YACAF,EAAAC,EAAAC,cAAA,aAIZ,IAAK,cACD,OACIF,EAAAC,EAAAC,cAAA,OAAKC,UAAWC,IAAM,gBAClBJ,EAAAC,EAAAC,cAAA,aAIZ,IAAK,aACD,OACIF,EAAAC,EAAAC,cAAA,OAAKC,UAAWC,IAAM,eAClBJ,EAAAC,EAAAC,cAAA,aAIZ,IAAK,sBACD,OACIF,EAAAC,EAAAC,cAAA,OAAKC,UAAWC,IAAM,wBAClBJ,EAAAC,EAAAC,cAAA,YACAF,EAAAC,EAAAC,cAAA,YACAF,EAAAC,EAAAC,cAAA,aAIZ,QACI,OACIF,EAAAC,EAAAC,cAAA,OAAKC,UAAWC,IAAM,eAClBJ,EAAAC,EAAAC,cAAA,YACAF,EAAAC,EAAAC,cAAA,YACAF,EAAAC,EAAAC,cAAA,YACAF,EAAAC,EAAAC,cAAA,YACAF,EAAAC,EAAAC,cAAA,uFAMV,IAAAG,EACkBC,KAAKC,MAAtBR,EADDM,EACCN,KACP,OAFMM,EACOG,QAETR,EAAAC,EAAAC,cAAA,OAAKC,UAAWC,IAAM,eAAgBA,MAAOE,KAAKC,MAAMH,OACnDE,KAAKR,aAAaC,IAEvB,YAhFUU,IAAMC,WAAtBb,EAMKc,aAAe,CAClBP,MAAO,IA6EAP,2BCvFfe,EAAAC,QAAA,CAAkBC,cAAA,2BAAAC,aAAA,0BAAAC,4BAAA,yCAAAC,OAAA,sBAAAC,yBAAA,sCAAAC,MAAA,qBAAAC,cAAA,2BAAAC,aAAA,0BAAAC,sBAAA,yDCAlBV,EAAAC,QAAA,CAAkBU,UAAA,yBAAAC,OAAA,sBAAAC,SAAA,wBAAAjB,QAAA,uBAAAkB,cAAA,2BAAAC,OAAA,sBAAAC,KAAA,0NCQZC,KADOC,YAAO,YAAnBC,kBAAgCC,yNAE7BC,MAAQ,CACJC,QAAQ,GACR1B,SAAQ,EACR2B,YAAW,EACXC,UAAS,KAMbC,gCAAa,SAAAC,IAAA,IAAAC,EAAA,OAAAC,EAAAvC,EAAAwC,KAAA,SAAAC,GAAA,cAAAA,EAAAC,KAAAD,EAAAE,MAAA,cACTC,EAAKC,SAAS,CACVtC,SAAQ,IAFHkC,EAAAE,KAAA,EAISG,YAAI,eAAe,CACjCC,MAAM,KALD,OAIHT,EAJGG,EAAAO,KAOTJ,EAAKC,SAAS,CACVtC,SAAQ,EACR0B,QAAQK,EAAIL,SAAW,GACvBE,SAASG,EAAIW,OAVR,wBAAAR,EAAAS,SAAAb,EAAAhC,WAab8C,OAAS,WACLP,EAAKtC,MAAM8C,QAAQD,YAEvBE,gCAAa,SAAAC,IAAA,IAAAhB,EAAA,OAAAC,EAAAvC,EAAAwC,KAAA,SAAAe,GAAA,cAAAA,EAAAb,KAAAa,EAAAZ,MAAA,UACLC,EAAKZ,MAAMG,WAAYS,EAAKZ,MAAME,WAD7B,CAAAqB,EAAAZ,KAAA,eAAAY,EAAAC,OAAA,wBAITZ,EAAKC,SAAS,CACVX,YAAW,IALNqB,EAAAZ,KAAA,EAOSG,YAAI,eAAe,CACjCC,MAAM,GACNU,OAAOb,EAAKZ,MAAMC,QAAQyB,SATrB,OAOHpB,EAPGiB,EAAAP,KAYTW,WAAW,WACPf,EAAKC,SAAS,CACVZ,QAAQW,EAAKZ,MAAMC,QAAQ2B,OAAOtB,EAAIL,SAAW,IACjDC,YAAW,EACXC,SAASG,EAAIW,OAEjBL,EAAKiB,QAAUjB,EAAKiB,OAAOC,gBAC7B,KAnBO,wBAAAP,EAAAL,SAAAI,EAAAjD,4FAlBTA,KAAK+B,8CAwCD,IAAA2B,EAAA1D,KAAA2D,EAC0C3D,KAAK2B,MAA5CC,EADH+B,EACG/B,QAAQ1B,EADXyD,EACWzD,QAAQ2B,EADnB8B,EACmB9B,WAAWC,EAD9B6B,EAC8B7B,SAG5B8B,EAFa5D,KAAKC,MAAM4D,SAAvBC,SAEYT,OAAS,GAAK,EAC3BU,EAAS,CAACA,OAAM,gBAAAR,OAAkB,GAAKK,EAAvB,OAEtB,OACII,EAAArE,EAAAC,cAAA,OAAKC,UAAWC,IAAMmB,WAClB+C,EAAArE,EAAAC,cAAA,OAAKC,UAAWC,IAAMoB,QAClB8C,EAAArE,EAAAC,cAAA,OAAKC,UAAS,4BAAA0D,OAA8BzD,IAAMqB,UAAY8C,QAASjE,KAAK8C,SAC5EkB,EAAArE,EAAAC,cAAA,OAAKC,UAAWC,IAAMoE,OAAtB,6BAEJF,EAAArE,EAAAC,cAAA,OAAKE,MAAOiE,GACRC,EAAArE,EAAAC,cAACuE,EAAA,EAAD,CAAQC,YAAapE,KAAKgD,WAAYqB,IAAK,SAAAC,GAAE,OAAEZ,EAAKF,OAAOc,IACvDN,EAAArE,EAAAC,cAAA,WACIoE,EAAArE,EAAAC,cAAA,UACKgC,GAAWA,EAAQ2C,IAAI,SAAAC,GAAI,OAAER,EAAArE,EAAAC,cAAA,MAAI6E,IAAKD,EAAKE,IACxCV,EAAArE,EAAAC,cAAC+E,EAAA,EAAD,CAAMC,GAAE,WAAArB,OAAaiB,EAAKE,KACtBV,EAAArE,EAAAC,cAAA,OAAKC,UAAWC,IAAM,gBAClBkE,EAAArE,EAAAC,cAAA,OAAKC,UAAWC,IAAMuB,QAClB2C,EAAArE,EAAAC,cAAA,OAAKiF,IAAKL,EAAKM,UAAWC,IAAI,MAElCf,EAAArE,EAAAC,cAAA,WACIoE,EAAArE,EAAAC,cAAA,OAAKC,UAAWC,IAAMwB,MAAOkD,EAAKlD,MAClC0C,EAAArE,EAAAC,cAAA,WACIoE,EAAArE,EAAAC,cAAA,QAAME,MAAO,CAACkF,QAAQR,EAAKS,UAAU,GAAG,SAAxC,gBAAqDT,EAAKS,WAD9D,SAEIjB,EAAArE,EAAAC,cAAA,QAAME,MAAO,CAACkF,QAAQR,EAAKU,UAAU,GAAG,SAAxC,gBAAqDV,EAAKU,mBAQlFlB,EAAArE,EAAAC,cAAA,OAAKC,UAAWC,IAAMI,QAASJ,MAAO,CAACkF,QAAQnD,EAAW,GAAG,SAA7D,yBACAmC,EAAArE,EAAAC,cAAA,OAAKC,UAAWC,IAAMI,QAASJ,MAAO,CAACkF,QAAQlD,EAAS,OAAO,KAA/D,+BAIZkC,EAAArE,EAAAC,cAACuF,EAAA,EAAD,CAASjF,QAASA,YAzFRC,IAAMC,wBA+FjBmB","file":"static/js/10.87f0e551.chunk.js","sourcesContent":["import React from 'react'\nimport PropTypes from 'prop-types'\nimport style from './style/index.module.less'\n\nclass Loading extends React.Component {\n    static propTypes = {\n        type: PropTypes.string,\n        loading: PropTypes.bool,\n        style: PropTypes.object\n    }\n    static defaultProps = {\n        style: {}\n    }\n    matchingType = (type) => {\n        switch (type) {\n            case 'line-scale': {\n                return (\n                    <div className={style['line-scale']}>\n                        <div/>\n                        <div/>\n                        <div/>\n                        <div/>\n                        <div/>\n                    </div>\n                )\n            }\n            case 'ball-clip-rotate-multiple': {\n                return (\n                    <div className={style['ball-clip-rotate-multiple']}>\n                        <div/>\n                        <div/>\n                    </div>\n                )\n            }\n            case 'ball-clip-rotate-pulse': {\n                return (\n                    <div className={style['ball-clip-rotate-pulse']}>\n                        <div/>\n                        <div/>\n                    </div>\n                )\n            }\n            case 'square-spin': {\n                return (\n                    <div className={style['square-spin']}>\n                        <div/>\n                    </div>\n                )\n            }\n            case 'ball-scale': {\n                return (\n                    <div className={style['ball-scale']}>\n                        <div/>\n                    </div>\n                )\n            }\n            case 'ball-scale-multiple': {\n                return (\n                    <div className={style['ball-scale-multiple']}>\n                        <div/>\n                        <div/>\n                        <div/>\n                    </div>\n                )\n            }\n            default:\n                return (\n                    <div className={style['line-scale']}>\n                        <div/>\n                        <div/>\n                        <div/>\n                        <div/>\n                        <div/>\n                    </div>\n                )\n        }\n    }\n\n    render () {\n        const {type, loading} = this.props\n        return loading ? (\n            <div className={style['loading-box']} style={this.props.style}>\n                {this.matchingType(type)}\n            </div>\n        ) : null\n    }\n}\n\nexport default Loading","// extracted by mini-css-extract-plugin\nmodule.exports = {\"loading-box\":\"index_loading-box__1Kgdg\",\"line-scale\":\"index_line-scale__1_OJc\",\"ball-clip-rotate-multiple\":\"index_ball-clip-rotate-multiple__3iegK\",\"rotate\":\"index_rotate__mxK17\",\"ball-clip-rotate-pulse\":\"index_ball-clip-rotate-pulse__2h6Nk\",\"scale\":\"index_scale__3JsNk\",\"square-spin\":\"index_square-spin__37Em9\",\"ball-scale\":\"index_ball-scale__16fEH\",\"ball-scale-multiple\":\"index_ball-scale-multiple__1jdW_\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"container\":\"index_container__3tkXg\",\"navbar\":\"index_navbar__27Aoe\",\"iconfont\":\"index_iconfont__1GOHh\",\"loading\":\"index_loading__23UgK\",\"singer-item\":\"index_singer-item__1AXn7\",\"avatar\":\"index_avatar__1rglQ\",\"name\":\"index_name__1epes\"};","import React from 'react'\nimport style from './style/index.module.less'\nimport {get} from '@/utils/ajax'\nimport {withRouter,Link} from 'react-router-dom'\nimport Scroll from '../../components/Scroll/index'\nimport Loading from '@/components/Loading'\nimport {inject,observer} from 'mobx-react'\n\n@withRouter @inject('appStore') @observer\nclass ArtistsPage extends React.Component{\n    state = {\n        artists:[],\n        loading:false,\n        isLoadMore:false, //是否正在'加载更多'\n        haveMore:true //数据是否还有\n    }\n\n    componentDidMount(){\n        this.getArtists()\n    }\n    getArtists = async ()=>{\n        this.setState({\n            loading:true\n        })\n        const res = await get('/top/artists',{\n            limit:30\n        })\n        this.setState({\n            loading:false,\n            artists:res.artists || [],\n            haveMore:res.more\n        })\n    }\n    goBack = ()=>{\n        this.props.history.goBack()\n    }\n    onLoadMore = async ()=>{\n        if(!this.state.haveMore || this.state.isLoadMore){\n            return\n        }\n        this.setState({\n            isLoadMore:true\n        })\n        const res = await get('/top/artists',{\n            limit:30,\n            offset:this.state.artists.length\n        })\n        //增加两秒的延迟，实际项目中可以不用，这里只是为显示这样一个加载中的过程\n        setTimeout(()=>{\n            this.setState({\n                artists:this.state.artists.concat(res.artists || []),\n                isLoadMore:false,\n                haveMore:res.more\n            })\n            this.scroll && this.scroll.finishPullUp()\n        },2000)\n    }\n\n    render(){\n        const {artists,loading,isLoadMore,haveMore} = this.state\n        const {playlist} = this.props.appStore\n\n        const h = playlist.length ? 60 : 0\n        const height = {height:`calc(100vh - ${ 44 + h}px`}\n\n        return (\n            <div className={style.container}>\n                <div className={style.navbar}>\n                    <div className={`iconfont icon-zuojiantou ${style.iconfont}`} onClick={this.goBack}/>\n                    <div className={style.title}>热门歌手</div>\n                </div>\n                <div style={height}>\n                    <Scroll onPullingUp={this.onLoadMore} ref={el=>this.scroll=el}>\n                        <div>\n                            <ul>\n                                {artists && artists.map(item=><li key={item.id}>\n                                    <Link to={`/singer/${item.id}`}>\n                                        <div className={style['singer-item']}>\n                                            <div className={style.avatar}>\n                                                <img src={item.img1v1Url} alt=\"\"/>\n                                            </div>\n                                            <div>\n                                                <div className={style.name}>{item.name}</div>\n                                                <div>\n                                                    <span style={{display:item.albumSize?'':'none'}}>专辑:{item.albumSize}</span>&emsp;\n                                                    <span style={{display:item.musicSize?'':'none'}}>单曲:{item.musicSize}</span>\n                                                </div>\n                                            </div>\n\n                                        </div>\n                                    </Link>\n                                </li>)}\n                            </ul>\n                            <div className={style.loading} style={{display:isLoadMore?'':'none'}}>加载中...</div>\n                            <div className={style.loading} style={{display:haveMore?'none':''}}>加载完毕</div>\n                        </div>\n                    </Scroll>\n                </div>\n                <Loading loading={loading}/>\n            </div>\n        )\n    }\n}\n\nexport default ArtistsPage"],"sourceRoot":""}