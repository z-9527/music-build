{"version":3,"sources":["components/Loading/index.js","components/Loading/style/index.module.less","components/NavBar/index.js","components/NavBar/style/index.module.less","components/SongList/index.js","components/SongList/style/index.module.less","components/HeaderInfo/index.js","components/HeaderInfo/style/index.module.less","pages/AlbumPage/style/index.module.less","pages/AlbumPage/index.js"],"names":["Loading","matchingType","type","react__WEBPACK_IMPORTED_MODULE_5___default","a","createElement","className","style","_this$props","this","props","loading","React","Component","defaultProps","module","exports","loading-box","line-scale","ball-clip-rotate-multiple","rotate","ball-clip-rotate-pulse","scale","square-spin","ball-scale","ball-scale-multiple","NavBar","withRouter","goBack","_this","history","navbar","concat","iconfont","onClick","title","children","SongList","state","list","loadingMore","_callee","_Users_one_Desktop_Demo_music_node_modules_babel_preset_react_app_node_modules_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default","wrap","_context","prev","next","scroll","finishPullUp","stop","onSelectSong","item","index","songlist","song","setState","slice","prevProps","_this2","bottomLoadingText","currentSong","react__WEBPACK_IMPORTED_MODULE_7___default","_components_Scroll__WEBPACK_IMPORTED_MODULE_8__","ref","el","onPullingUp","map","key","id","active","num","red","pic","src","al","picUrl","alt","text","name","ar","reduce","init","current","length","fontSize","song-list-box","react__WEBPACK_IMPORTED_MODULE_0__","__webpack_require__","react__WEBPACK_IMPORTED_MODULE_0___default","n","_style_index_module_less__WEBPACK_IMPORTED_MODULE_1__","_style_index_module_less__WEBPACK_IMPORTED_MODULE_1___default","_utils_util__WEBPACK_IMPORTED_MODULE_2__","dayjs__WEBPACK_IMPORTED_MODULE_3__","dayjs__WEBPACK_IMPORTED_MODULE_3___default","HeaderInfo","info","container","coverImgUrl","left","formatNumber","playCount","right","author","creator","avatarUrl","nickname","dayjs","updateTime","format","bg-img","info-wrapper","description","AlbumPage","inject","observer","songs","getDetail","res","album","_Users_one_Desktop_Demo_music_node_modules_babel_preset_react_app_node_modules_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_2___default","get","sent","blurPicUrl","publishTime","artist","obj","appStore","match","params","_this$state","_this$props$appStore","h","playlist","height","react__WEBPACK_IMPORTED_MODULE_9___default","_components_NavBar__WEBPACK_IMPORTED_MODULE_13__","_components_HeaderInfo__WEBPACK_IMPORTED_MODULE_14__","antd_mobile_lib_tabs__WEBPACK_IMPORTED_MODULE_1___default","tabs","swipeable","_components_SongList__WEBPACK_IMPORTED_MODULE_16__","_components_Loading_index__WEBPACK_IMPORTED_MODULE_15__","_components_Scroll__WEBPACK_IMPORTED_MODULE_17__","dangerouslySetInnerHTML","createMarkup"],"mappings":"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","file":"static/js/8.05e15b91.chunk.js","sourcesContent":["import React from 'react'\nimport PropTypes from 'prop-types'\nimport style from './style/index.module.less'\n\nclass Loading extends React.Component {\n    static propTypes = {\n        type: PropTypes.string,\n        loading: PropTypes.bool,\n        style: PropTypes.object\n    }\n    static defaultProps = {\n        style: {}\n    }\n    matchingType = (type) => {\n        switch (type) {\n            case 'line-scale': {\n                return (\n                    <div className={style['line-scale']}>\n                        <div/>\n                        <div/>\n                        <div/>\n                        <div/>\n                        <div/>\n                    </div>\n                )\n            }\n            case 'ball-clip-rotate-multiple': {\n                return (\n                    <div className={style['ball-clip-rotate-multiple']}>\n                        <div/>\n                        <div/>\n                    </div>\n                )\n            }\n            case 'ball-clip-rotate-pulse': {\n                return (\n                    <div className={style['ball-clip-rotate-pulse']}>\n                        <div/>\n                        <div/>\n                    </div>\n                )\n            }\n            case 'square-spin': {\n                return (\n                    <div className={style['square-spin']}>\n                        <div/>\n                    </div>\n                )\n            }\n            case 'ball-scale': {\n                return (\n                    <div className={style['ball-scale']}>\n                        <div/>\n                    </div>\n                )\n            }\n            case 'ball-scale-multiple': {\n                return (\n                    <div className={style['ball-scale-multiple']}>\n                        <div/>\n                        <div/>\n                        <div/>\n                    </div>\n                )\n            }\n            default:\n                return (\n                    <div className={style['line-scale']}>\n                        <div/>\n                        <div/>\n                        <div/>\n                        <div/>\n                        <div/>\n                    </div>\n                )\n        }\n    }\n\n    render () {\n        const {type, loading} = this.props\n        return loading ? (\n            <div className={style['loading-box']} style={this.props.style}>\n                {this.matchingType(type)}\n            </div>\n        ) : null\n    }\n}\n\nexport default Loading","// extracted by mini-css-extract-plugin\nmodule.exports = {\"loading-box\":\"index_loading-box__1Kgdg\",\"line-scale\":\"index_line-scale__1_OJc\",\"ball-clip-rotate-multiple\":\"index_ball-clip-rotate-multiple__3iegK\",\"rotate\":\"index_rotate__mxK17\",\"ball-clip-rotate-pulse\":\"index_ball-clip-rotate-pulse__2h6Nk\",\"scale\":\"index_scale__3JsNk\",\"square-spin\":\"index_square-spin__37Em9\",\"ball-scale\":\"index_ball-scale__16fEH\",\"ball-scale-multiple\":\"index_ball-scale-multiple__1jdW_\"};","import React from 'react'\nimport style from './style/index.module.less'\nimport {withRouter} from 'react-router-dom'\n\n@withRouter\nclass NavBar extends React.Component{\n    goBack = ()=>{\n        this.props.history.goBack()\n    }\n    render(){\n        return (\n            <div className={style.navbar}>\n                <div className={`iconfont icon-zuojiantou ${style.iconfont}`} onClick={this.goBack}/>\n                <div className={style.title}>{this.props.children}</div>\n            </div>\n        )\n    }\n}\n\nexport default NavBar","// extracted by mini-css-extract-plugin\nmodule.exports = {\"navbar\":\"index_navbar__1ThId\",\"iconfont\":\"index_iconfont__2l53L\",\"title\":\"index_title__37GaT\"};","import React from 'react'\nimport PropTypes from 'prop-types'\nimport Scroll from '@/components/Scroll'\nimport style from './style/index.module.less'\n\nclass SongList extends React.Component {\n    static propTypes = {\n        list: PropTypes.array,\n        bottomLoadingText: PropTypes.string,\n        loading: PropTypes.bool,\n        loadingMore: PropTypes.func,\n        onSelectSong: PropTypes.func,\n        currentSong: PropTypes.object,\n    }\n    static defaultProps = {\n        list: [],\n        bottomLoadingText:'加载中...',   //底部loading文字\n        loading:false,    //是否正在加载\n        loadingMore:()=>{},\n        onSelectSong:()=>{},\n        currentSong:{},\n\n    }\n\n    state = {\n        list: []\n    }\n\n    componentDidMount () {\n        this.setState({\n            list: this.props.list.slice()\n        })\n    }\n    //原本想用getDerivedStateFromProps周期，但是this拿不到\n    componentDidUpdate(prevProps){\n        if (this.props.list !== prevProps.list) {\n            this.setState({\n                list:this.props.list\n            })\n        }\n    }\n\n    // //新的生命周期,但是拿不到this\n    // static getDerivedStateFromProps = (nextProps, prevState) => {\n    //     const {list} = nextProps\n    //     console.log(1,this)\n    //     if (list !== prevState.list) {\n    //         // this.scroll && this.scroll.refresh()\n    //         return {\n    //             list\n    //         }\n    //     }\n    //     return null\n    // }\n\n    loadingMore = async ()=>{\n        await this.props.loadingMore()\n        this.scroll && this.scroll.finishPullUp()\n    }\n    //一般公共组件不要编写业务逻辑，虽然点击事件都是一样的，但还要从外面传进来,实际上我们可以再用一个容器组件来包裹，在容器组件中接收store\n    onSelectSong = (item,index)=>{\n        this.props.onSelectSong({\n            songlist:this.state.list,\n            song:item,\n            index\n        })\n    }\n\n\n    render () {\n        const {list} = this.state\n        const {bottomLoadingText,loading,currentSong} = this.props\n\n        return (\n            <div className={style['song-list-box']}>\n                <Scroll ref={el => this.scroll = el} onPullingUp={this.loadingMore}>\n                   <div>\n                       <ul>\n                           {\n                               list && list.map((item,index)=><li key={item.id} onClick={()=>this.onSelectSong(item,index)} className={currentSong.id===item.id ? style.active : ''}>\n                                   <div className={`${style.num} ${index<3 ? style.red : ''}`}>{index + 1}</div>\n                                   <div className={style.pic}>\n                                       <img src={item.al && item.al.picUrl} alt=\"\"/>\n                                   </div>\n                                   <div className={style.text}>\n                                       <h3>{item.name}</h3>\n                                       <div>\n                                           {item.ar && item.ar.reduce((init,current,index)=>{\n                                               if(index < item.ar.length - 1 ){\n                                                   init += current.name + ' / '\n                                               } else {\n                                                   init += current.name + ' - '\n                                               }\n                                               return init\n                                           },'')}\n                                           {item.al && item.al.name}\n                                       </div>\n                                   </div>\n                                   <p className={`iconfont ${currentSong.id===item.id ? 'icon-bofang2':'icon-bofang'}`} style={{fontSize:20}}/>\n                               </li>)\n                           }\n                       </ul>\n                       {\n                           loading && list.length ? <div className={style.loading}>{bottomLoadingText}</div> : null\n                       }\n\n                   </div>\n                </Scroll>\n            </div>\n        )\n    }\n}\n\nexport default SongList","// extracted by mini-css-extract-plugin\nmodule.exports = {\"song-list-box\":\"index_song-list-box__i1WMi\",\"active\":\"index_active__3OtXW\",\"num\":\"index_num__3UTKe\",\"text\":\"index_text__1jHa_\",\"red\":\"index_red__X28LA\",\"pic\":\"index_pic__3aB-W\",\"loading\":\"index_loading__2L3ZA\"};","import React from 'react'\nimport style from './style/index.module.less'\nimport {formatNumber} from '@/utils/util'\nimport dayjs from 'dayjs'\n\nconst HeaderInfo = (props)=> {\n    const info = props.info\n    return (\n        <div className={style.container}>\n            <img src={info.coverImgUrl || ''} alt=\"\" className={style['bg-img']}/>\n            <div className={style['info-wrapper']}>\n                <div className={style.left}>\n                    <img src={info.coverImgUrl} alt=\"\"/>\n                    <p><span className={'iconfont icon-erji1'} style={{fontSize:12}}/> {formatNumber(info.playCount)}</p>\n                </div>\n                <div className={style.right}>\n                    <div className={style.name}>{info.name}</div>\n                    <div className={style.author}>\n                        <img src={info.creator && info.creator.avatarUrl} alt=\"\"/>\n                        <span>{info.creator && info.creator.nickname}</span>\n                    </div>\n                    <div>{dayjs(info.updateTime).format('YYYY-MM-DD')} 更新</div>\n                </div>\n            </div>\n        </div>\n    )\n}\nexport default HeaderInfo","// extracted by mini-css-extract-plugin\nmodule.exports = {\"container\":\"index_container__2hZHI\",\"bg-img\":\"index_bg-img__2lI9s\",\"info-wrapper\":\"index_info-wrapper__3X23B\",\"left\":\"index_left__1IzgM\",\"right\":\"index_right__1C9Vp\",\"name\":\"index_name__3m8jj\",\"author\":\"index_author__3ezMh\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"container\":\"index_container__2hxDr\",\"description\":\"index_description__VAKn-\"};","import React from 'react'\nimport {withRouter} from 'react-router-dom'\nimport style from './style/index.module.less'\nimport {get} from '@/utils/ajax'\nimport NavBar from '@/components/NavBar'\nimport {Tabs} from 'antd-mobile'\nimport HeaderInfo from '@/components/HeaderInfo'\nimport Loading from '../../components/Loading/index'\nimport SongList from '@/components/SongList'\nimport Scroll from '@/components/Scroll'\nimport {createMarkup} from '@/utils/util'\nimport {inject,observer} from 'mobx-react'\n\n\n@withRouter @inject('appStore') @observer\nclass AlbumPage extends React.Component{\n    state = {\n        info:{},   //专辑信息\n        songs:[],   //歌曲\n        loading:false //页面loading\n    }\n\n    componentDidMount(){\n        const id = this.props.match.params.id\n        this.getDetail(id)\n    }\n    getDetail = async (id)=>{\n        this.setState({\n            loading:true\n        })\n        const res = await get(`/album?id=${id}`)\n        const album = res.album || {}\n\n        const info = {\n            coverImgUrl:album.blurPicUrl,\n            description:album.description,\n            name:album.name,\n            updateTime:album.publishTime,\n            creator:{\n                nickname:album.artist && album.artist.name,\n                avatarUrl:album.artist && album.artist.picUrl,\n            }\n        }\n        this.setState({\n            info:info,\n            songs:res.songs || [],\n            loading:false\n        })\n    }\n    onSelectSong = (obj)=>{\n        this.props.appStore.onSelectSong(obj)\n    }\n\n    render(){\n        const {info,songs,loading} = this.state\n        const {currentSong,playlist} = this.props.appStore\n\n        const tabs = [\n            {title:'歌曲'},\n            {title:'专辑简介'},\n        ]\n\n        const h = playlist.length ? 60 : 0\n        const height = {height:`calc(100vh - ${ 300 + h}px`}\n\n        return (\n            <div className={style.container}>\n                <NavBar>专辑</NavBar>\n                <HeaderInfo info={info}/>\n                <div>\n                    <Tabs tabs={tabs} swipeable={false}>\n                        <div style={height}>\n                            <SongList list={songs} onSelectSong={this.onSelectSong} currentSong={currentSong}/>\n                            <Loading loading={loading}/>\n                        </div>\n                        <div style={height}>\n                            <Scroll>\n                                <div className={style.description} dangerouslySetInnerHTML={createMarkup(info.description)}/>\n                            </Scroll>\n                        </div>\n                    </Tabs>\n                </div>\n            </div>\n        )\n    }\n}\n\nexport default AlbumPage"],"sourceRoot":""}