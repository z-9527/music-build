{"version":3,"sources":["pages/FindPage/style/index.module.less","pages/FindPage/img/1.png","pages/FindPage/index.js"],"names":["module","exports","container","section","banners-box","menu","icon","hot-singer-box","title-box","singer-box","recommend-box","sheet-box","playCount","__webpack_require__","p","Index","withRouter","state","banners","imageUrl","image","hotSingerList","recommendList","highqualityList","initPage","Promise","all","_this","getBanners","getHotSingers","getRecommends","getHighqualitys","_callee","res","_Users_one_Desktop_Demo_music_node_modules_babel_preset_react_app_node_modules_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_2___default","a","wrap","_context","prev","next","get","sent","setState","stop","this","_callee2","_context2","artists","_callee3","list","_context3","result","slice","_callee4","_context4","playlists","_this2","_this$state","react__WEBPACK_IMPORTED_MODULE_9___default","createElement","className","style","_components_Scroll__WEBPACK_IMPORTED_MODULE_15__","antd_mobile_lib_carousel__WEBPACK_IMPORTED_MODULE_1___default","infinite","autoplay","map","item","key","src","alt","title","url","color","react_router_dom__WEBPACK_IMPORTED_MODULE_14__","to","concat","singer","id","img1v1Url","name","onClick","props","history","push","fontSize","sheet","picUrl","formatNumber","coverImgUrl","React","Component"],"mappings":"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","file":"static/js/3.713dced0.chunk.js","sourcesContent":["// extracted by mini-css-extract-plugin\nmodule.exports = {\"container\":\"index_container__2g9bV\",\"section\":\"index_section__2zhPe\",\"banners-box\":\"index_banners-box__2s0Hu\",\"menu\":\"index_menu__1dRMA\",\"icon\":\"index_icon__3SnDi\",\"hot-singer-box\":\"index_hot-singer-box__3lot2\",\"title-box\":\"index_title-box__12suV\",\"singer-box\":\"index_singer-box__1CSyy\",\"recommend-box\":\"index_recommend-box__9x-wd\",\"sheet-box\":\"index_sheet-box__PTBZI\",\"playCount\":\"index_playCount__3YNk1\"};","module.exports = __webpack_public_path__ + \"static/media/1.5998b8bc.png\";","import React from 'react'\nimport {get} from '@/utils/ajax'\nimport style from './style/index.module.less'\nimport {Carousel} from 'antd-mobile'\nimport image from './img/1.png'\nimport {Link,withRouter} from 'react-router-dom'\nimport Scroll from '@/components/Scroll'\nimport {formatNumber} from '@/utils/util'\n\n// https://www.cnblogs.com/zyl-Tara/p/7998590.html\n// 关于react中切换路由时报以上错误，实际的原因是因为在组件挂载（mounted）之后进行了异步操作，比如ajax请求或者设置了定时器等，而你在callback中进行了setState操作。当你切换路由时，组件已经被卸载（unmounted）了，此时异步操作中callback还在执行，因此setState没有得到值。\n\n@withRouter\nclass Index extends React.Component{\n    state = {\n        banners:[{imageUrl:image}], //给一个初始值，避免在数据返回之前为空数组\n        hotSingerList:[],  //热门歌手列表\n        recommendList:[],  //推荐歌单\n        highqualityList:[], //精品歌单\n    }\n\n    componentDidMount(){\n        this.initPage()\n    }\n    componentWillUnmount(){\n        this.setState = ()=>{\n            return;\n        };\n    }\n    initPage = ()=>{\n        Promise.all([\n            this.getBanners(),\n            this.getHotSingers(),\n            this.getRecommends(),\n            this.getHighqualitys()\n        ])\n    }\n    getBanners = async ()=>{\n        const res = await get('/banner')\n        this.setState({\n            banners:res.banners || [{imageUrl:image}]\n        })\n    }\n    getHotSingers = async ()=>{\n        const res = await get('/top/artists?offset=0&limit=8')\n        this.setState({\n            hotSingerList:res.artists || []\n        })\n    }\n    getRecommends = async ()=>{\n        const res = await get('/personalized')\n        const list = res.result || []\n        this.setState({\n            recommendList:list.slice(0,6)\n        })\n    }\n    getHighqualitys = async ()=>{\n        const res = await get('/top/playlist/highquality?limit=6')\n        this.setState({\n            highqualityList:res.playlists || []\n        })\n    }\n\n\n    render(){\n        const {banners,hotSingerList,recommendList,highqualityList} = this.state\n\n        const menu = [\n            {\n                title:'热门歌手',\n                icon:'icon-remen1',\n                url:'/artists',\n                color:'#dd4330'\n            },\n            {\n                title:'每日推荐',\n                icon:'icon-PCbofangye_paihangbang',\n                url:'/playlists',\n                color:'orange'\n            },\n            {\n                title:'歌单',\n                icon:'icon-liebiao1',\n                url:'/playlists',\n                color:'#16c2c2',\n            },\n        ]\n\n        return(\n            <div className={style.container}>\n                <Scroll>\n                    <div>\n                        <div className={style['banners-box']}>\n                            <Carousel infinite autoplay>\n                                {banners && banners.map(item=> <img key={item.imageUrl} src={item.imageUrl} alt=\"\"/>)}\n                            </Carousel>\n                        </div>\n                        <div className={style.menu}>\n                            {menu.map(item=><div key={item.title}>\n                                <Link to={item.url}>\n                                    <div className={`iconfont ${style.icon} ${item.icon}`} style={{color:item.color}}/>\n                                    <div>{item.title}</div>\n                                </Link>\n                            </div>)}\n                        </div>\n                        <div className={style['hot-singer-box']}>\n                            <div className={style['title-box']}>\n                                <div>热门歌手</div>\n                                <Link to={'/artists'}>查看全部</Link>\n                            </div>\n                            <ul>\n                                {hotSingerList && hotSingerList.map(singer=><li key={singer.id}>\n                                    <Link to={`/singer/${singer.id}`} className={style['singer-box']}>\n                                        <img src={singer.img1v1Url} alt=\"\"/>\n                                        <div>{singer.name}</div>\n                                    </Link>\n                                </li>)}\n                            </ul>\n                        </div>\n                        <div className={style['recommend-box']}>\n                            <div onClick={()=>this.props.history.push('/playlists')}>每日推荐 <span className={'iconfont' +\n                            ' icon-iconfontjiantou5'} style={{fontSize:12}}/></div>\n                            <ul>\n                                {recommendList && recommendList.map(sheet=><li key={sheet.id}>\n                                    <Link to={`/sheet/${sheet.id}`} className={style['sheet-box']}>\n                                        <img src={sheet.picUrl} alt=\"\"/>\n                                        <div>{sheet.name}</div>\n                                        <p className={style.playCount}><span className={'iconfont icon-erji1'} style={{fontSize:12}}/> {formatNumber(sheet.playCount)}</p>\n                                    </Link>\n                                </li>)}\n                            </ul>\n                        </div>\n                        <div className={style['recommend-box']}>\n                            <div onClick={()=>this.props.history.push('/playlists')}>精品歌单 <span className={'iconfont icon-iconfontjiantou5'} style={{fontSize:12}}/></div>\n                            <ul>\n                                {highqualityList && highqualityList.map(sheet=><li key={sheet.id}>\n                                    <Link to={`/sheet/${sheet.id}`} className={style['sheet-box']}>\n                                        <img src={sheet.coverImgUrl} alt=\"\"/>\n                                        <div>{sheet.name}</div>\n                                        <p className={style.playCount}><span className={'iconfont icon-erji1'} style={{fontSize:12}}/> {formatNumber(sheet.playCount)}</p>\n                                    </Link>\n                                </li>)}\n                            </ul>\n                        </div>\n                    </div>\n                </Scroll>\n            </div>\n        )\n    }\n}\n\nexport default Index"],"sourceRoot":""}